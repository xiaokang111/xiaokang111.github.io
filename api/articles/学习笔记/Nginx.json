{"title":"Nginx","uid":"af6a277a1f79cc7652a602f9f57ed64f","slug":"学习笔记/Nginx","date":"2022-12-05T08:00:50.000Z","updated":"2023-03-21T11:33:44.051Z","comments":true,"path":"api/articles/学习笔记/Nginx.json","keywords":null,"cover":"https://img1.baidu.com/it/u=1605091118,2342466643&fm=253&fmt=auto&app=120&f=JPEG?w=1422&h=800","content":"<h1 id=\"第一章认识Nginx\"><a href=\"#第一章认识Nginx\" class=\"headerlink\" title=\"第一章认识Nginx\"></a>第一章认识Nginx</h1><h2 id=\"1-1什么是Nginx\"><a href=\"#1-1什么是Nginx\" class=\"headerlink\" title=\"1.1什么是Nginx\"></a>1.1什么是Nginx</h2><p>Nginx (engine x)  是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP&#x2F;POP3&#x2F;SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。2011年6月1日，nginx 1.0.4发布。其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。在全球活跃的网站中有12.18%的使用比率，大约为2220万个网站。Nginx 是一个安装非常的简单、配置文件非常简洁（还能够支持perl语法）、Bug非常少的服务。Nginx 启动特别容易，并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能够不间断服务的情况下进行软件版本的升级。Nginx代码完全用C语言从头写成。官方数据测试表明能够支持高达 50,000 个并发连接数的响应。</p>\n<h2 id=\"1-2为什么需要Nginx\"><a href=\"#1-2为什么需要Nginx\" class=\"headerlink\" title=\"1.2为什么需要Nginx\"></a>1.2为什么需要Nginx</h2><p>在简单环境中，并发量小，用户使用的少，所以在低并发的情况下，一个jar包启动应用就够了，然后内部tomcat返回内容给用户。</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/HPM7S24YDD4TXOW%5BSKR4%5BFT.png\" alt=\"image-1\"></p>\n<p>但是当项目持续迭代后，平台的用户快速增长，并发了增大，这时候一台服务器就无法满足需求了。</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/2.png\" alt=\"image-2\"></p>\n<p>于是我们需要横向扩展，又增加了服务器。这个时候几个项目启动在不同的服务器上，用户要访问，就需要增加一个代理服务器了，通过代理服务器来帮我们转发和处理请求。</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/3.png\" alt=\"image-3\"></p>\n<p>我们希望这个代理服务器可以帮助我们接收用户的请求，然后将用户的请求按照规则帮我们转发到不同的服务器节点之上。这个过程用户是无感知的，用户并不知道是哪个服务器返回的结果，我们还希望他可以按照服务器的性能提供不同的权重选择。保证最佳体验！所以我们使用了Nginx。</p>\n<h2 id=\"1-3Nginx的作用\"><a href=\"#1-3Nginx的作用\" class=\"headerlink\" title=\"1.3Nginx的作用\"></a>1.3Nginx的作用</h2><p>Http代理，反向代理：作为web服务器最常用的功能之一，尤其是反向代理。</p>\n<p>正向代理：</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/4.png\" alt=\"image-4\"></p>\n<p>反向代理：</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/5.png\" alt=\"image-5\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Nginx提供了两种负载均衡策略，内置策略和扩展策略。内置策略为轮询，加权轮询，Ip hash。扩展策略，就天马行空，只有你想不到的没有他做不到的。</code></pre>\n\n<p>轮询</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/6.png\" alt=\"image-6\"></p>\n<p>加权轮询</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/7.png\" alt=\"image-7\"></p>\n<p>iphash对客户端请求的ip进行hash操作，然后根据hash结果将同一个客户端ip的请求分发给同一台服务器进行处理，可以解决session不共享的问题。</p>\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/8.png\" alt=\"image-8\"></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">动静分离，在我们的软件开发中，有些请求是需要后台处理的，有些请求是不需要经过后台处理的（如：css、html、jpg、js等等文件），这些不需要经过后台处理的文件称为静态文件。让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好了拆分以后，我们就可以根据静态资源的特点将其做缓存操作。提高资源响应的速度。</code></pre>\n\n<p><img src=\"https://blog-xml.oss-cn-beijing.aliyuncs.com/Nginx/9.png\" alt=\"image-9\"></p>\n<p>目前，通过使用Nginx大大提高了我们网站的响应速度，优化了用户体验，让网站的健壮性更上一层楼！</p>\n<p>具体操作配置参考：<br><a href=\"https://blog.csdn.net/S_ZaiJiangHu/article/details/126838279\">https://blog.csdn.net/S_ZaiJiangHu/article/details/126838279</a></p>\n","text":"第一章认识Nginx1.1什么是NginxNginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP&#x2F;POP3&#x2F;SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамбл...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Java","slug":"Java","count":5,"path":"api/tags/Java.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E7%AB%A0%E8%AE%A4%E8%AF%86Nginx\"><span class=\"toc-text\">第一章认识Nginx</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1%E4%BB%80%E4%B9%88%E6%98%AFNginx\"><span class=\"toc-text\">1.1什么是Nginx</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81Nginx\"><span class=\"toc-text\">1.2为什么需要Nginx</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-3Nginx%E7%9A%84%E4%BD%9C%E7%94%A8\"><span class=\"toc-text\">1.3Nginx的作用</span></a></li></ol></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"MySQL","uid":"838ae74e3a76757d637de803a615bfd9","slug":"学习笔记/MySQL","date":"2022-12-05T08:00:50.000Z","updated":"2023-02-11T05:39:19.870Z","comments":true,"path":"api/articles/学习笔记/MySQL.json","keywords":null,"cover":"https://img1.baidu.com/it/u=3807749352,1988138666&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500","text":"MySQL ","link":"","photos":[],"count_time":{"symbolsCount":6,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"数据库","slug":"数据库","count":2,"path":"api/tags/数据库.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"RabbtiMQ学习笔记","uid":"ee30ef9a588d2ac3314205f5348312b8","slug":"学习笔记/RabbitMQ","date":"2022-12-05T08:00:50.000Z","updated":"2023-02-11T05:50:03.583Z","comments":true,"path":"api/articles/学习笔记/RabbitMQ.json","keywords":null,"cover":"https://img2.baidu.com/it/u=750601440,41384307&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500","text":"RabbitMQ ","link":"","photos":[],"count_time":{"symbolsCount":9,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"中间件","slug":"中间件","count":2,"path":"api/tags/中间件.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}